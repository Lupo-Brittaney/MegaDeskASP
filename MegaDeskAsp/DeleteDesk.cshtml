@{
    Layout = "~/_Layout.cshtml";
    Page.Title = "MegaDesk | Delete Quote";


    var custName = "";
    var date = "";
    var width = "";
    var depth = "";
    var material = "";
    var rushDays = "";
    var drawers = "";
    var quote = "";
    var deskId = "";

    if (!IsPost)
    {
        if (!Request.QueryString["ID"].IsEmpty() && Request.QueryString["ID"].AsInt() > 0)
        {
            deskId = Request.QueryString["ID"];
            var db = Database.Open("DeskDatabase");
            var dbCommand = "SELECT * FROM Desks WHERE ID = @0";
            var row = db.QuerySingle(dbCommand, deskId);
            if (row != null)
            {
                custName = row.custName;
                width = row.width.ToString();
                depth = row.depth.ToString();
                material = row.material;
                drawers = row.drawers.ToString();
                rushDays = row.rushDays.ToString();
                quote = row.quote.ToString();
                date = row.Date.ToString();
            }
            else
            {
                Validation.AddFormError("No desk was found for that ID.");
            }
        }
        else
        {
            Validation.AddFormError("No desk was found for that ID.");
        }
    }

    if (IsPost && !Request["buttonDelete"].IsEmpty())
    {
        deskId = Request.Form["deskId"];
        var db = Database.Open("DeskDatabase");
        var deleteCommand = "DELETE FROM Desks WHERE ID = @0";
        db.Execute(deleteCommand, deskId);
        Response.Redirect("~/MegaDesk");
    }

}

<h2>Delete a Scripture Entry</h2>
@Html.ValidationSummary()
<p><a href="~/MegaDesk">Return to view all quotes</a></p>

<form method="post">
    <fieldset>
        <legend>Desk Information</legend>

        <p>
            <span>Customer Name:</span>
            <span>@custName</span>
        </p>

        <p>
            <span>Width:</span>
            <span>@width in</span>
        </p>

        <p>
            <span>Depth:</span>
            <span>@depth in</span>
        </p>

        <p>
            <span>Material:</span>
            <span>@material</span>
        </p>
        <p>
            <span>Drawers:</span>
            <span>@drawers</span>
        </p>
        <p>
            <span>Rush Days:</span>
            <span>@rushDays days</span>
        </p>

        <p>
            <span>Date Quoted:</span>
            <span>@date</span>
        </p>
        <p>
            <span>Quote total:</span>
            <span>$@quote</span>
        </p>

        <input type="hidden" name="deskId" value="@deskId" />
        <p><input type="submit" name="buttonDelete" value="Delete Desk Quote" /></p>
    </fieldset>
</form>